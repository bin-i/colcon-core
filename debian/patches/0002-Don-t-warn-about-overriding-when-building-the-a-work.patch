From c0fe4f2652bfd8031d7e9606f88e23db89c12915 Mon Sep 17 00:00:00 2001
From: Shane Loretz <sloretz@openrobotics.org>
Date: Fri, 21 Jan 2022 14:02:19 -0800
Subject: [PATCH 2/2] Don't warn about overriding when building the a workspace
 that has already been sourced

Signed-off-by: Shane Loretz <sloretz@openrobotics.org>
---
 colcon_core/verb/build.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/colcon_core/verb/build.py b/colcon_core/verb/build.py
index 2fd358d..72f6080 100644
--- a/colcon_core/verb/build.py
+++ b/colcon_core/verb/build.py
@@ -162,6 +162,10 @@ class BuildVerb(VerbExtensionPoint):
 
         underlay_packages = {}
         for prefix_path in get_chained_prefix_path():
+            if prefix_path == install_base:
+                # The install space of the workspace being built is sourced
+                # Ignore it for the purposes of the override warning
+                continue
             packages = find_installed_packages(Path(prefix_path))
             if packages:
                 for pkg, path in packages.items():
-- 
2.25.1

